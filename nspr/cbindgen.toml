# See https://github.com/mozilla/cbindgen/blob/master/docs.md#cbindgentoml
# for detailed documentation of every option here.

# More at https://github.com/mozilla/cbindgen/blob/master/docs.md

language = "C"

header = "// This Source Code Form is subject to the terms of the Mozilla Public\n// License, v. 2.0. If a copy of the MPL was not distributed with this\n// file, You can obtain one at https://mozilla.org/MPL/2.0/."
pragma_once = true
autogen_warning = "// Warning, this file is autogenerated by cbindgen. Don't modify this manually."
include_version = true
cpp_compat = true
documentation_style = "c99"
sys_includes = [
        "stdarg.h",
        "stdint.h",
        "stdlib.h",
        "stdio.h",
        "netinet/in.h",
        "sys/un.h",
        "netdb.h",
        "arpa/inet.h",
]
no_includes = true

[defines]
# FIXME: This doesn't work, see lib.rs
# "target_endian = little" = "IS_LITTLE_ENDIAN"
# "not(target_endian = little)" = "IS_BIG_ENDIAN"
# "target_pointer_width = 64" = "HAVE_LONG_LONG"
# "not(target_pointer_width = 64)" = ""

[export]
include = [
        "PLArenaPool",
        "PLHashAllocOps",
        "PLHashComparator",
        "PLHashFunction",
        "PLHashNumber",
        "PLHashTable",
        "PRBool",
        "PRCallOnceType",
        "PRCList",
        "PRCondVar",
        "PRDescType",
        "PRErrorCode",
        "PRFileDesc",
        "PRFileInfo",
        "PRFileInfo64",
        "PRFilePrivate",
        "PRFuncPtr",
        "PRHostEnt",
        "PRInt16",
        "PRInt32",
        "PRInt64",
        "PRInt8",
        "PRIntervalTime",
        "PRIntn",
        "PRIOMethods",
        "PRIOVec",
        "PRLibrary",
        "PRLock",
        "PRLogModuleLevel",
        "PRMonitor",
        "PRPackedBool",
        "PRPollDesc",
        "PRSize",
        "PRSocketOptionData",
        "PRSockOption",
        "PRStatus",
        "PRThread",
        "PRThreadPriority",
        "PRTime",
        "PRUint16",
        "PRUint32",
        "PRUint64",
        "PRUint8",
        "PRUintn",
        "PRWord",
        "PRRWLock",
        "PRShutdownHow",
        "PRErrorMessage",
        "PRFileMap",
        "PLArena",
        "PRCListStr",
        "PRAddrInfo",
        "PRSysInfo",
        "PRDirEntry",
        "PRDirFlags",
        "PLOptState",
        "PLOptStatus",
        "PRProcessAttr",
        "PRFileOpenFlags",
        "PRPollFlags",
]
# exclude = []
[export.rename] # see https://github.com/mozilla/cbindgen/issues/539
"iovec" = "struct iovec"
"sockaddr_in" = "struct sockaddr_in"
"sockaddr_in6" = "struct sockaddr_in6"
"sockaddr_un" = "struct sockaddr_un"
"sockaddr" = "struct sockaddr"
"in6_addr" = "struct in6_addr"
"hostent" = "struct hostent"
"addrinfo" = "struct addrinfo"

[layout]
packed = "__attribute__((packed))"
aligned_n = "__attribute__((aligned({})))"

[fn]
must_use = "__attribute__((warn_unused_result))"
deprecated = "__attribute__((deprecated))"
deprecated_with_note = "__attribute__((deprecated({})))"
no_return = "__attribute__((noreturn))"
args = "auto"

[struct]
must_use = "__attribute__((warn_unused))"
deprecated = "__attribute__((deprecated))"
deprecated_with_note = "__attribute__((deprecated({})))"

[enum]
must_use = "__attribute__((warn_unused))"
deprecated = "__attribute__((deprecated))"
deprecated_with_note = "__attribute__((deprecated({})))"
deprecated_variant = "__attribute__((deprecated))"

[macro_expansion]
bitflags = true

[parse]
parse_deps = true
include = ["libc"]
extra_bindings = ["libc"]

# [parse.expand]
# crates = ["libc"]

[ptr]
non_null_attribute = "__attribute__((nonnull))"
